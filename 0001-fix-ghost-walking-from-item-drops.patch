From c012cb2ac862c39289b2f2f5b1d29e5255920f5b Mon Sep 17 00:00:00 2001
From: gmriggs <gmriggs@gmail.com>
Date: Sun, 5 Dec 2021 18:26:40 -0500
Subject: [PATCH] fix ghost walking from item drops

---
 Source/ACE.Server/WorldObjects/Player_Inventory.cs | 14 ++++++++------
 1 file changed, 8 insertions(+), 6 deletions(-)

diff --git a/Source/ACE.Server/WorldObjects/Player_Inventory.cs b/Source/ACE.Server/WorldObjects/Player_Inventory.cs
index 40a4fc743..028ba612f 100644
--- a/Source/ACE.Server/WorldObjects/Player_Inventory.cs
+++ b/Source/ACE.Server/WorldObjects/Player_Inventory.cs
@@ -625,10 +625,11 @@ private ActionChain StartPickupChain()
             ActionChain pickupChain = new ActionChain();
 
             // start picking up item animation
+            EnqueueBroadcast(new GameMessageUpdatePosition(this));
+
             var motion = new Motion(CurrentMotionState.Stance, MotionPickup);
-            EnqueueBroadcast(
-                new GameMessageUpdatePosition(this),
-                new GameMessageUpdateMotion(this, motion));
+
+            EnqueueBroadcastMotion(motion);
 
             // Wait for animation to progress
             var motionTable = DatManager.PortalDat.ReadFromDat<MotionTable>(MotionTableId);
@@ -686,10 +687,11 @@ private ActionChain AddPickupChainToMoveToChain(MotionCommand pickupMotion)
                 return new ActionChain();
 
             // start picking up item animation
+            EnqueueBroadcast(new GameMessageUpdatePosition(this));
+
             var motion = new Motion(CurrentMotionState.Stance, pickupMotion);
-            EnqueueBroadcast(
-                new GameMessageUpdatePosition(this),
-                new GameMessageUpdateMotion(this, motion));
+
+            EnqueueBroadcastMotion(motion);
 
             // Wait for animation to progress
             var motionTable = DatManager.PortalDat.ReadFromDat<MotionTable>(MotionTableId);
-- 
2.32.0.windows.1

